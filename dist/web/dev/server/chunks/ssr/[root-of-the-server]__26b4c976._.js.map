{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/bhuvaneshwarikanagaraj/Desktop/Rahoot/packages/web/src/components/Toaster.tsx"],"sourcesContent":["\"use client\"\n\nimport { ToastBar, Toaster as ToasterRaw } from \"react-hot-toast\"\n\nconst Toaster = () => (\n  <ToasterRaw>\n    {(t) => (\n      <ToastBar\n        toast={t}\n        style={{\n          ...t.style,\n          boxShadow: \"rgba(0, 0, 0, 0.25) 0px -4px inset\",\n          fontWeight: 700,\n        }}\n      >\n        {({ icon, message }) => (\n          <>\n            {icon}\n            {message}\n          </>\n        )}\n      </ToastBar>\n    )}\n  </ToasterRaw>\n)\n\nexport default Toaster\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,UAAU,kBACd,gZAAC,iTAAU;kBACR,CAAC,kBACA,gZAAC,kTAAQ;gBACP,OAAO;gBACP,OAAO;oBACL,GAAG,EAAE,KAAK;oBACV,WAAW;oBACX,YAAY;gBACd;0BAEC,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,iBACjB;;4BACG;4BACA;;;;;;;;;;;;;uCAQE"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///Users/bhuvaneshwarikanagaraj/Desktop/Rahoot/packages/web/src/contexts/socketProvider.tsx"],"sourcesContent":["/* eslint-disable no-empty-function */\n\"use client\"\n\nimport {\n  ClientToServerEvents,\n  ServerToClientEvents,\n} from \"@rahoot/common/types/game/socket\"\nimport ky from \"ky\"\nimport React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\"\nimport { io, Socket } from \"socket.io-client\"\nimport { v7 as uuid } from \"uuid\"\n\ntype TypedSocket = Socket<ServerToClientEvents, ClientToServerEvents>\n\ninterface SocketContextValue {\n  socket: TypedSocket | null\n  isConnected: boolean\n  clientId: string\n  connect: () => void\n  disconnect: () => void\n  reconnect: () => void\n}\n\nconst SocketContext = createContext<SocketContextValue>({\n  socket: null,\n  isConnected: false,\n  clientId: \"\",\n  connect: () => {},\n  disconnect: () => {},\n  reconnect: () => {},\n})\n\nconst getSocketServer = async () => {\n  const res = await ky.get(\"/socket\").json<{ url: string }>()\n\n  return res.url\n}\n\nconst getClientId = (): string => {\n  try {\n    const stored = localStorage.getItem(\"client_id\")\n\n    if (stored) {\n      return stored\n    }\n\n    const newId = uuid()\n    localStorage.setItem(\"client_id\", newId)\n\n    return newId\n  } catch {\n    return uuid()\n  }\n}\n\nexport const SocketProvider = ({ children }: { children: React.ReactNode }) => {\n  const [socket, setSocket] = useState<TypedSocket | null>(null)\n  const [isConnected, setIsConnected] = useState(false)\n  const [clientId] = useState<string>(() => getClientId())\n\n  useEffect(() => {\n    if (socket) {\n      return\n    }\n\n    let s: TypedSocket | null = null\n\n    const initSocket = async () => {\n      try {\n        const socketUrl = await getSocketServer()\n\n        s = io(socketUrl, {\n          transports: [\"websocket\"],\n          autoConnect: false,\n          auth: {\n            clientId,\n          },\n        })\n\n        setSocket(s)\n\n        s.on(\"connect\", () => {\n          setIsConnected(true)\n        })\n\n        s.on(\"disconnect\", () => {\n          setIsConnected(false)\n        })\n\n        s.on(\"connect_error\", (err) => {\n          console.error(\"Connection error:\", err.message)\n        })\n      } catch (error) {\n        console.error(\"Failed to initialize socket:\", error)\n      }\n    }\n\n    initSocket()\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      s?.disconnect()\n    }\n  }, [clientId])\n\n  const connect = useCallback(() => {\n    if (socket && !socket.connected) {\n      socket.connect()\n    }\n  }, [socket])\n\n  const disconnect = useCallback(() => {\n    if (socket && socket.connected) {\n      socket.disconnect()\n    }\n  }, [socket])\n\n  const reconnect = useCallback(() => {\n    if (socket) {\n      socket.disconnect()\n      socket.connect()\n    }\n  }, [socket])\n\n  return (\n    <SocketContext.Provider\n      value={{\n        socket,\n        isConnected,\n        clientId,\n        connect,\n        disconnect,\n        reconnect,\n      }}\n    >\n      {children}\n    </SocketContext.Provider>\n  )\n}\n\nexport const useSocket = () => useContext(SocketContext)\n\nexport const useEvent = <E extends keyof ServerToClientEvents>(\n  event: E,\n  callback: ServerToClientEvents[E],\n) => {\n  const { socket } = useSocket()\n\n  useEffect(() => {\n    if (!socket) {\n      return\n    }\n\n    socket.on(event, callback as any)\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      socket.off(event, callback as any)\n    }\n  }, [socket, event, callback])\n}\n"],"names":[],"mappings":"AAAA,oCAAoC;;;;;;;;;AAOpC;AACA;AAOA;AACA;AAfA;;;;;;AA4BA,MAAM,8BAAgB,IAAA,wXAAa,EAAqB;IACtD,QAAQ;IACR,aAAa;IACb,UAAU;IACV,SAAS,KAAO;IAChB,YAAY,KAAO;IACnB,WAAW,KAAO;AACpB;AAEA,MAAM,kBAAkB;IACtB,MAAM,MAAM,MAAM,sNAAE,CAAC,GAAG,CAAC,WAAW,IAAI;IAExC,OAAO,IAAI,GAAG;AAChB;AAEA,MAAM,cAAc;IAClB,IAAI;QACF,MAAM,SAAS,aAAa,OAAO,CAAC;QAEpC,IAAI,QAAQ;YACV,OAAO;QACT;QAEA,MAAM,QAAQ,IAAA,mOAAI;QAClB,aAAa,OAAO,CAAC,aAAa;QAElC,OAAO;IACT,EAAE,OAAM;QACN,OAAO,IAAA,mOAAI;IACb;AACF;AAEO,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAiC;IACxE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,mXAAQ,EAAqB;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,mXAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,GAAG,IAAA,mXAAQ,EAAS,IAAM;IAE1C,IAAA,oXAAS,EAAC;QACR,IAAI,QAAQ;YACV;QACF;QAEA,IAAI,IAAwB;QAE5B,MAAM,aAAa;YACjB,IAAI;gBACF,MAAM,YAAY,MAAM;gBAExB,IAAI,IAAA,iQAAE,EAAC,WAAW;oBAChB,YAAY;wBAAC;qBAAY;oBACzB,aAAa;oBACb,MAAM;wBACJ;oBACF;gBACF;gBAEA,UAAU;gBAEV,EAAE,EAAE,CAAC,WAAW;oBACd,eAAe;gBACjB;gBAEA,EAAE,EAAE,CAAC,cAAc;oBACjB,eAAe;gBACjB;gBAEA,EAAE,EAAE,CAAC,iBAAiB,CAAC;oBACrB,QAAQ,KAAK,CAAC,qBAAqB,IAAI,OAAO;gBAChD;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;YAChD;QACF;QAEA;QAEA,6CAA6C;QAC7C,OAAO;YACL,GAAG;QACL;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,UAAU,IAAA,sXAAW,EAAC;QAC1B,IAAI,UAAU,CAAC,OAAO,SAAS,EAAE;YAC/B,OAAO,OAAO;QAChB;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,aAAa,IAAA,sXAAW,EAAC;QAC7B,IAAI,UAAU,OAAO,SAAS,EAAE;YAC9B,OAAO,UAAU;QACnB;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,YAAY,IAAA,sXAAW,EAAC;QAC5B,IAAI,QAAQ;YACV,OAAO,UAAU;YACjB,OAAO,OAAO;QAChB;IACF,GAAG;QAAC;KAAO;IAEX,qBACE,gZAAC,cAAc,QAAQ;QACrB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,MAAM,YAAY,IAAM,IAAA,qXAAU,EAAC;AAEnC,MAAM,WAAW,CACtB,OACA;IAEA,MAAM,EAAE,MAAM,EAAE,GAAG;IAEnB,IAAA,oXAAS,EAAC;QACR,IAAI,CAAC,QAAQ;YACX;QACF;QAEA,OAAO,EAAE,CAAC,OAAO;QAEjB,6CAA6C;QAC7C,OAAO;YACL,OAAO,GAAG,CAAC,OAAO;QACpB;IACF,GAAG;QAAC;QAAQ;QAAO;KAAS;AAC9B"}}]
}