{"version":3,"sources":["../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../packages/web/src/stores/player.tsx","../../../../../../packages/web/src/components/Form.tsx","../../../../../../packages/web/src/components/Input.tsx","../../../../../../packages/web/src/components/game/join/Room.tsx","../../../../../../packages/web/src/components/game/join/Username.tsx","../../../../../../packages/web/src/app/%28auth%29/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","import { StatusDataMap } from \"@rahoot/common/types/game/status\"\nimport { createStatus, Status } from \"@rahoot/web/utils/createStatus\"\nimport { create } from \"zustand\"\n\ntype PlayerState = {\n  username?: string\n  points?: number\n}\n\ntype PlayerStore<T> = {\n  gameId: string | null\n  player: PlayerState | null\n  status: Status<T> | null\n\n  setGameId: (_gameId: string | null) => void\n\n  setPlayer: (_state: PlayerState) => void\n  login: (_gameId: string) => void\n  join: (_username: string) => void\n  updatePoints: (_points: number) => void\n\n  setStatus: <K extends keyof T>(_name: K, _data: T[K]) => void\n\n  reset: () => void\n}\n\nconst initialState = {\n  gameId: null,\n  player: null,\n  status: null,\n}\n\nexport const usePlayerStore = create<PlayerStore<StatusDataMap>>((set) => ({\n  ...initialState,\n\n  setGameId: (gameId) => set({ gameId }),\n\n  setPlayer: (player: PlayerState) => set({ player }),\n  login: (username) =>\n    set((state) => ({\n      player: { ...state.player, username },\n    })),\n\n  join: (gameId) => {\n    set((state) => ({\n      gameId,\n      player: { ...state.player, points: 0 },\n    }))\n  },\n\n  updatePoints: (points) =>\n    set((state) => ({\n      player: { ...state.player, points },\n    })),\n\n  setStatus: (name, data) => set({ status: createStatus(name, data) }),\n\n  reset: () => set(initialState),\n}))\n","import { PropsWithChildren } from \"react\"\n\nconst Form = ({ children }: PropsWithChildren) => (\n  <div className=\"z-10 flex w-full max-w-80 flex-col gap-4 rounded-md bg-white p-4 shadow-sm\">\n    {children}\n  </div>\n)\n\nexport default Form\n","import clsx from \"clsx\"\nimport React from \"react\"\n\ntype Props = React.InputHTMLAttributes<HTMLInputElement>\n\nconst Input = ({ className, type = \"text\", ...otherProps }: Props) => (\n  <input\n    type={type}\n    className={clsx(\n      \"rounded-sm p-2 text-lg font-semibold outline-2 outline-gray-300\",\n      className,\n    )}\n    {...otherProps}\n  />\n)\n\nexport default Input\n","import Button from \"@rahoot/web/components/Button\"\nimport Form from \"@rahoot/web/components/Form\"\nimport Input from \"@rahoot/web/components/Input\"\nimport { useEvent, useSocket } from \"@rahoot/web/contexts/socketProvider\"\nimport { usePlayerStore } from \"@rahoot/web/stores/player\"\nimport { KeyboardEvent, useState } from \"react\"\n\nconst Room = () => {\n  const { socket } = useSocket()\n  const { join } = usePlayerStore()\n  const [invitation, setInvitation] = useState(\"\")\n\n  const handleJoin = () => {\n    socket?.emit(\"player:join\", invitation)\n  }\n\n  const handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === \"Enter\") {\n      handleJoin()\n    }\n  }\n\n  useEvent(\"game:successRoom\", (gameId) => {\n    join(gameId)\n  })\n\n  return (\n    <Form>\n      <Input\n        onChange={(e) => setInvitation(e.target.value)}\n        onKeyDown={handleKeyDown}\n        placeholder=\"PIN Code here\"\n      />\n      <Button onClick={handleJoin}>Submit</Button>\n    </Form>\n  )\n}\n\nexport default Room\n","\"use client\"\n\nimport { STATUS } from \"@rahoot/common/types/game/status\"\nimport Button from \"@rahoot/web/components/Button\"\nimport Form from \"@rahoot/web/components/Form\"\nimport Input from \"@rahoot/web/components/Input\"\nimport { useEvent, useSocket } from \"@rahoot/web/contexts/socketProvider\"\nimport { usePlayerStore } from \"@rahoot/web/stores/player\"\n\nimport { useRouter } from \"next/navigation\"\nimport { KeyboardEvent, useState } from \"react\"\n\nconst Username = () => {\n  const { socket } = useSocket()\n  const { gameId, login, setStatus } = usePlayerStore()\n  const router = useRouter()\n  const [username, setUsername] = useState(\"\")\n\n  const handleLogin = () => {\n    if (!gameId) {\n      return\n    }\n\n    socket?.emit(\"player:login\", { gameId, data: { username } })\n  }\n\n  const handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === \"Enter\") {\n      handleLogin()\n    }\n  }\n\n  useEvent(\"game:successJoin\", (gameId) => {\n    setStatus(STATUS.WAIT, { text: \"Waiting for the players\" })\n    login(username)\n\n    router.replace(`/game/${gameId}`)\n  })\n\n  return (\n    <Form>\n      <Input\n        onChange={(e) => setUsername(e.target.value)}\n        onKeyDown={handleKeyDown}\n        placeholder=\"Username here\"\n      />\n      <Button onClick={handleLogin}>Submit</Button>\n    </Form>\n  )\n}\n\nexport default Username\n","\"use client\"\n\nimport Room from \"@rahoot/web/components/game/join/Room\"\nimport Username from \"@rahoot/web/components/game/join/Username\"\nimport { useEvent, useSocket } from \"@rahoot/web/contexts/socketProvider\"\nimport { usePlayerStore } from \"@rahoot/web/stores/player\"\nimport { useEffect } from \"react\"\nimport toast from \"react-hot-toast\"\n\nconst Home = () => {\n  const { isConnected, connect } = useSocket()\n  const { player } = usePlayerStore()\n\n  useEffect(() => {\n    if (!isConnected) {\n      connect()\n    }\n  }, [connect, isConnected])\n\n  useEvent(\"game:errorMessage\", (message) => {\n    toast.error(message)\n  })\n\n  if (player) {\n    return <Username />\n  }\n\n  return <Room />\n}\n\nexport default Home\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}