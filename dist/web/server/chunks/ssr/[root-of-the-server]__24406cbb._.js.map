{"version":3,"sources":["../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../../../packages/web/src/stores/player.tsx","../../../../../../node_modules/.pnpm/%40swc%2Bhelpers%400.5.15/node_modules/%40swc/helpers/cjs/_interop_require_wildcard.cjs","../../../../../../packages/web/src/stores/manager.tsx","../../../../../../packages/web/src/app/game/manager/%5BgameId%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","import { StatusDataMap } from \"@rahoot/common/types/game/status\"\nimport { createStatus, Status } from \"@rahoot/web/utils/createStatus\"\nimport { create } from \"zustand\"\n\ntype PlayerState = {\n  username?: string\n  points?: number\n}\n\ntype PlayerStore<T> = {\n  gameId: string | null\n  player: PlayerState | null\n  status: Status<T> | null\n\n  setGameId: (_gameId: string | null) => void\n\n  setPlayer: (_state: PlayerState) => void\n  login: (_gameId: string) => void\n  join: (_username: string) => void\n  updatePoints: (_points: number) => void\n\n  setStatus: <K extends keyof T>(_name: K, _data: T[K]) => void\n\n  reset: () => void\n}\n\nconst initialState = {\n  gameId: null,\n  player: null,\n  status: null,\n}\n\nexport const usePlayerStore = create<PlayerStore<StatusDataMap>>((set) => ({\n  ...initialState,\n\n  setGameId: (gameId) => set({ gameId }),\n\n  setPlayer: (player: PlayerState) => set({ player }),\n  login: (username) =>\n    set((state) => ({\n      player: { ...state.player, username },\n    })),\n\n  join: (gameId) => {\n    set((state) => ({\n      gameId,\n      player: { ...state.player, points: 0 },\n    }))\n  },\n\n  updatePoints: (points) =>\n    set((state) => ({\n      player: { ...state.player, points },\n    })),\n\n  setStatus: (name, data) => set({ status: createStatus(name, data) }),\n\n  reset: () => set(initialState),\n}))\n","\"use strict\";\n\nfunction _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n\n    return (_getRequireWildcardCache = function(nodeInterop) {\n        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) return obj;\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") return { default: obj };\n\n    var cache = _getRequireWildcardCache(nodeInterop);\n\n    if (cache && cache.has(obj)) return cache.get(obj);\n\n    var newObj = { __proto__: null };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);\n            else newObj[key] = obj[key];\n        }\n    }\n\n    newObj.default = obj;\n\n    if (cache) cache.set(obj, newObj);\n\n    return newObj;\n}\nexports._ = _interop_require_wildcard;\n","import { Player } from \"@rahoot/common/types/game\"\nimport { StatusDataMap } from \"@rahoot/common/types/game/status\"\nimport { createStatus, Status } from \"@rahoot/web/utils/createStatus\"\nimport { create } from \"zustand\"\n\ntype ManagerStore<T> = {\n  gameId: string | null\n  status: Status<T> | null\n  players: Player[]\n\n  setGameId: (_gameId: string | null) => void\n  setStatus: <K extends keyof T>(_name: K, _data: T[K]) => void\n  resetStatus: () => void\n  setPlayers: (_players: Player[]) => void\n\n  reset: () => void\n}\n\nconst initialState = {\n  gameId: null,\n  status: null,\n  players: [],\n}\n\nexport const useManagerStore = create<ManagerStore<StatusDataMap>>((set) => ({\n  ...initialState,\n\n  setGameId: (gameId) => set({ gameId }),\n\n  setStatus: (name, data) => set({ status: createStatus(name, data) }),\n  resetStatus: () => set({ status: null }),\n\n  setPlayers: (players) => set({ players }),\n\n  reset: () => set(initialState),\n}))\n","\"use client\"\n\nimport { STATUS } from \"@rahoot/common/types/game/status\"\nimport GameWrapper from \"@rahoot/web/components/game/GameWrapper\"\nimport Answers from \"@rahoot/web/components/game/states/Answers\"\nimport Leaderboard from \"@rahoot/web/components/game/states/Leaderboard\"\nimport Podium from \"@rahoot/web/components/game/states/Podium\"\nimport Prepared from \"@rahoot/web/components/game/states/Prepared\"\nimport Question from \"@rahoot/web/components/game/states/Question\"\nimport Responses from \"@rahoot/web/components/game/states/Responses\"\nimport Room from \"@rahoot/web/components/game/states/Room\"\nimport Start from \"@rahoot/web/components/game/states/Start\"\nimport { useEvent, useSocket } from \"@rahoot/web/contexts/socketProvider\"\nimport { useManagerStore } from \"@rahoot/web/stores/manager\"\nimport { useQuestionStore } from \"@rahoot/web/stores/question\"\nimport { GAME_STATE_COMPONENTS_MANAGER } from \"@rahoot/web/utils/constants\"\nimport { useParams, useRouter } from \"next/navigation\"\nimport toast from \"react-hot-toast\"\n\nconst ManagerGame = () => {\n  const router = useRouter()\n  const { gameId: gameIdParam }: { gameId?: string } = useParams()\n  const { socket } = useSocket()\n  const { gameId, status, setGameId, setStatus, setPlayers, reset } =\n    useManagerStore()\n  const { setQuestionStates } = useQuestionStore()\n\n  useEvent(\"game:status\", ({ name, data }) => {\n    if (name in GAME_STATE_COMPONENTS_MANAGER) {\n      setStatus(name, data)\n    }\n  })\n\n  useEvent(\"connect\", () => {\n    if (gameIdParam) {\n      socket?.emit(\"manager:reconnect\", { gameId: gameIdParam })\n    }\n  })\n\n  useEvent(\n    \"manager:successReconnect\",\n    ({ gameId, status, players, currentQuestion }) => {\n      setGameId(gameId)\n      setStatus(status.name, status.data)\n      setPlayers(players)\n      setQuestionStates(currentQuestion)\n    },\n  )\n\n  useEvent(\"game:reset\", (message) => {\n    router.replace(\"/manager\")\n    reset()\n    setQuestionStates(null)\n    toast.error(message)\n  })\n\n  const handleSkip = () => {\n    if (!gameId) {\n      return\n    }\n\n    switch (status?.name) {\n      case STATUS.SHOW_ROOM:\n        socket?.emit(\"manager:startGame\", { gameId })\n\n        break\n\n      case STATUS.SELECT_ANSWER:\n        socket?.emit(\"manager:abortQuiz\", { gameId })\n\n        break\n\n      case STATUS.SHOW_RESPONSES:\n        socket?.emit(\"manager:showLeaderboard\", { gameId })\n\n        break\n\n      case STATUS.SHOW_LEADERBOARD:\n        socket?.emit(\"manager:nextQuestion\", { gameId })\n\n        break\n    }\n  }\n\n  let component = null\n\n  switch (status?.name) {\n    case STATUS.SHOW_ROOM:\n      component = <Room data={status.data} />\n\n      break\n\n    case STATUS.SHOW_START:\n      component = <Start data={status.data} />\n\n      break\n\n    case STATUS.SHOW_PREPARED:\n      component = <Prepared data={status.data} />\n\n      break\n\n    case STATUS.SHOW_QUESTION:\n      component = <Question data={status.data} />\n\n      break\n\n    case STATUS.SELECT_ANSWER:\n      component = <Answers data={status.data} />\n\n      break\n\n    case STATUS.SHOW_RESPONSES:\n      component = <Responses data={status.data} />\n\n      break\n\n    case STATUS.SHOW_LEADERBOARD:\n      component = <Leaderboard data={status.data} />\n\n      break\n\n    case STATUS.FINISHED:\n      component = <Podium data={status.data} />\n\n      break\n  }\n\n  return (\n    <GameWrapper statusName={status?.name} onNext={handleSkip} manager>\n      {component}\n    </GameWrapper>\n  )\n}\n\nexport default ManagerGame\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactDOM"],"mappings":"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","ignoreList":[0,1,2,3,5]}