{"version":3,"sources":["../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../node_modules/.pnpm/next%4016.0.10_%40babel%2Bcore%407.28.5_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../packages/web/src/stores/manager.tsx","../../../../../../packages/web/src/components/Form.tsx","../../../../../../packages/web/src/components/Input.tsx","../../../../../../packages/web/src/app/%28auth%29/manager/page.tsx","../../../../../../packages/web/src/components/game/create/ManagerPassword.tsx","../../../../../../packages/web/src/components/game/create/SelectQuizz.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","import { Player } from \"@rahoot/common/types/game\"\nimport { StatusDataMap } from \"@rahoot/common/types/game/status\"\nimport { createStatus, Status } from \"@rahoot/web/utils/createStatus\"\nimport { create } from \"zustand\"\n\ntype ManagerStore<T> = {\n  gameId: string | null\n  status: Status<T> | null\n  players: Player[]\n\n  setGameId: (_gameId: string | null) => void\n  setStatus: <K extends keyof T>(_name: K, _data: T[K]) => void\n  resetStatus: () => void\n  setPlayers: (_players: Player[]) => void\n\n  reset: () => void\n}\n\nconst initialState = {\n  gameId: null,\n  status: null,\n  players: [],\n}\n\nexport const useManagerStore = create<ManagerStore<StatusDataMap>>((set) => ({\n  ...initialState,\n\n  setGameId: (gameId) => set({ gameId }),\n\n  setStatus: (name, data) => set({ status: createStatus(name, data) }),\n  resetStatus: () => set({ status: null }),\n\n  setPlayers: (players) => set({ players }),\n\n  reset: () => set(initialState),\n}))\n","import { PropsWithChildren } from \"react\"\n\nconst Form = ({ children }: PropsWithChildren) => (\n  <div className=\"z-10 flex w-full max-w-80 flex-col gap-4 rounded-md bg-white p-4 shadow-sm\">\n    {children}\n  </div>\n)\n\nexport default Form\n","import clsx from \"clsx\"\nimport React from \"react\"\n\ntype Props = React.InputHTMLAttributes<HTMLInputElement>\n\nconst Input = ({ className, type = \"text\", ...otherProps }: Props) => (\n  <input\n    type={type}\n    className={clsx(\n      \"rounded-sm p-2 text-lg font-semibold outline-2 outline-gray-300\",\n      className,\n    )}\n    {...otherProps}\n  />\n)\n\nexport default Input\n","\"use client\"\n\nimport { QuizzWithId } from \"@rahoot/common/types/game\"\nimport { STATUS } from \"@rahoot/common/types/game/status\"\nimport ManagerPassword from \"@rahoot/web/components/game/create/ManagerPassword\"\nimport SelectQuizz from \"@rahoot/web/components/game/create/SelectQuizz\"\nimport { useEvent, useSocket } from \"@rahoot/web/contexts/socketProvider\"\nimport { useManagerStore } from \"@rahoot/web/stores/manager\"\nimport { useRouter } from \"next/navigation\"\nimport { useState } from \"react\"\n\nconst Manager = () => {\n  const { setGameId, setStatus } = useManagerStore()\n  const router = useRouter()\n  const { socket } = useSocket()\n\n  const [isAuth, setIsAuth] = useState(false)\n  const [quizzList, setQuizzList] = useState<QuizzWithId[]>([])\n\n  useEvent(\"manager:quizzList\", (quizzList) => {\n    setIsAuth(true)\n    setQuizzList(quizzList)\n  })\n\n  useEvent(\"manager:gameCreated\", ({ gameId, inviteCode }) => {\n    setGameId(gameId)\n    setStatus(STATUS.SHOW_ROOM, { text: \"Waiting for the players\", inviteCode })\n    router.push(`/game/manager/${gameId}`)\n  })\n\n  const handleAuth = (password: string) => {\n    socket?.emit(\"manager:auth\", password)\n  }\n  const handleCreate = (quizzId: string) => {\n    socket?.emit(\"game:create\", quizzId)\n  }\n\n  if (!isAuth) {\n    return <ManagerPassword onSubmit={handleAuth} />\n  }\n\n  return <SelectQuizz quizzList={quizzList} onSelect={handleCreate} />\n}\n\nexport default Manager\n","import Button from \"@rahoot/web/components/Button\"\nimport Form from \"@rahoot/web/components/Form\"\nimport Input from \"@rahoot/web/components/Input\"\nimport { useEvent } from \"@rahoot/web/contexts/socketProvider\"\nimport { KeyboardEvent, useState } from \"react\"\nimport toast from \"react-hot-toast\"\n\ntype Props = {\n  onSubmit: (_password: string) => void\n}\n\nconst ManagerPassword = ({ onSubmit }: Props) => {\n  const [password, setPassword] = useState(\"\")\n\n  const handleSubmit = () => {\n    onSubmit(password)\n  }\n\n  const handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === \"Enter\") {\n      handleSubmit()\n    }\n  }\n\n  useEvent(\"manager:errorMessage\", (message) => {\n    toast.error(message)\n  })\n\n  return (\n    <Form>\n      <Input\n        type=\"password\"\n        onChange={(e) => setPassword(e.target.value)}\n        onKeyDown={handleKeyDown}\n        placeholder=\"Manager password\"\n      />\n      <Button onClick={handleSubmit}>Submit</Button>\n    </Form>\n  )\n}\n\nexport default ManagerPassword\n","import { QuizzWithId } from \"@rahoot/common/types/game\"\nimport Button from \"@rahoot/web/components/Button\"\nimport clsx from \"clsx\"\nimport { useState } from \"react\"\nimport toast from \"react-hot-toast\"\n\ntype Props = {\n  quizzList: QuizzWithId[]\n  onSelect: (_id: string) => void\n}\n\nconst SelectQuizz = ({ quizzList, onSelect }: Props) => {\n  const [selected, setSelected] = useState<string | null>(null)\n\n  const handleSelect = (id: string) => () => {\n    if (selected === id) {\n      setSelected(null)\n    } else {\n      setSelected(id)\n    }\n  }\n\n  const handleSubmit = () => {\n    if (!selected) {\n      toast.error(\"Please select a quizz\")\n\n      return\n    }\n\n    onSelect(selected)\n  }\n\n  return (\n    <div className=\"z-10 flex w-full max-w-md flex-col gap-4 rounded-md bg-white p-4 shadow-sm\">\n      <div className=\"flex flex-col items-center justify-center\">\n        <h1 className=\"mb-2 text-2xl font-bold\">Select a quizz</h1>\n        <div className=\"w-full space-y-2\">\n          {quizzList.map((quizz) => (\n            <button\n              key={quizz.id}\n              className={clsx(\n                \"flex w-full items-center justify-between rounded-md p-3 outline outline-gray-300\",\n              )}\n              onClick={handleSelect(quizz.id)}\n            >\n              {quizz.subject}\n\n              <div\n                className={clsx(\n                  \"h-5 w-5 rounded outline outline-offset-3 outline-gray-300\",\n                  selected === quizz.id &&\n                    \"bg-primary border-primary/80 shadow-inset\",\n                )}\n              ></div>\n            </button>\n          ))}\n        </div>\n      </div>\n      <Button onClick={handleSubmit}>Submit</Button>\n    </div>\n  )\n}\n\nexport default SelectQuizz\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}